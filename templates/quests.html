{% extends "base.html" %}

{% block content %}
<h1>ã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§</h1>

{% for uq in user_quests %}

    <div style="border:2px solid #ccc; padding:20px; margin-bottom:20px; border-radius:10px;">

        <h2>{{ uq.quest.title }}</h2>
        <p>{{ uq.quest.description }}</p>

        <p>å ±é…¬ï¼š{{ uq.quest.reward_points }} ãƒã‚¤ãƒ³ãƒˆ</p>

        {% if uq.quest.target_total_size %}
            <p>
                é€²æ—ï¼š
                {{ uq.current_total_size | round(1) }} cm /
                {{ uq.quest.target_total_size }} cm
            </p>

            <div style="background:#eee; height:20px; border-radius:10px; overflow:hidden;">
                <div style="
                    background:orange;
                    height:100%;
                    width:
                    {{ (uq.current_total_size / uq.quest.target_total_size * 100)
                       if uq.quest.target_total_size > 0 else 0 }}%;
                ">
                </div>
            </div>
        {% endif %}

        {% if uq.status == 'é”æˆ' %}
            <p style="color: green; font-weight: bold;">
                ğŸ‰ é”æˆæ¸ˆã¿ï¼
            </p>

            <a href="{{ url_for('quest.reset_quest', quest_id=uq.quest.id) }}">
                <button>ãƒªã‚»ãƒƒãƒˆ</button>
            </a>

        {% else %}
            <p style="color: gray;">
                ã¾ã é”æˆã—ã¦ã„ã¾ã›ã‚“
            </p>
        {% endif %}

    </div>

{% endfor %}

{% endblock %}