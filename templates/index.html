{% extends "base.html" %}

{% block bottom_nav %}{% endblock %}

{% block content %}

<div class="header">
    <div class="sea-bg" style="background-image: url('{{ bg_image }}');"></div>
    <div class="header-content">
        <div class="title-banner">ğŸ£ é‡£ã‚ŠãŸã¾GO!!</div>
        <div class="user-info">
            <span class="username">å‹‡è€…ï¼šã‚²ã‚¹ãƒˆ</span>
            <span class="badge-icon">ğŸ¡</span>
        </div>
        <div class="level-display">
            <span class="level-label">âœ¦ LEVEL âœ¦</span>
            <span class="level-number">?</span>
            <div class="level-bar">
                <div class="level-bar-fill"></div>
            </div>
        </div>
    </div>
</div>

<div class="section-title">âš” å›³é‘‘ãƒ»çŸ¥è­˜ âš”</div>
<div class="menu-grid">
    <a href="/learn/tools" class="menu-item">
        <img src="{{ url_for('static', filename='images/tackle_box.png') }}" alt="é“å…·å›³é‘‘">
        <div class="menu-label">é“å…·å›³é‘‘</div>
    </a>
    <a href="/learn/conditions" class="menu-item">
        <img src="{{ url_for('static', filename='images/lake_day.png') }}" alt="é‡£ã‚Œã‚‹æ¡ä»¶">
        <div class="menu-label">é‡£ã‚Œã‚‹æ¡ä»¶</div>
    </a>
    <a href="/learn/spots" class="menu-item">
        <img src="{{ url_for('static', filename='images/map_icon.png') }}" alt="å ´æ‰€">
        <div class="menu-label">å ´æ‰€</div>
    </a>
    <a href="/learn/rules" class="menu-item">
        <img src="{{ url_for('static', filename='images/fishing_license.png') }}" alt="ãƒ«ãƒ¼ãƒ«">
        <div class="menu-label">ãƒ«ãƒ¼ãƒ«</div>
    </a>
</div>

<div class="catch-log">
    <div class="catch-log-title">ğŸ† ï½ ãƒ™ã‚¹ãƒˆã‚µã‚¤ã‚º ï½ ğŸ†</div>
    {% if best_catch %}
    <div class="catch-card">
        <div class="catch-photo">ğŸŸ</div>
        <div class="catch-info">
            <p>é­šç¨®ï¼š{{ best_catch.fish.name }}</p>
            <p>å¤§ãã•ï¼š{{ best_catch.size_cm }}cm</p>
            <p>ãƒã‚¤ãƒ³ãƒˆï¼šâ­{{ best_catch.earned_points }}pt</p>
        </div>
    </div>
    {% else %}
    <div class="catch-empty">
        ï½ ã¾ã é‡£æœãŒã‚ã‚Šã¾ã›ã‚“ ï½<br><br>
        ğŸ£ é‡£ã‚Šã«è¡Œã£ã¦<br>
        è¨˜éŒ²ã‚’ã¤ã‘ã‚ˆã†ï¼
    </div>
    {% endif %}
</div>

<div class="section-title">ğŸ… ã‚¯ã‚¨ã‚¹ãƒˆãƒ»æŒ‘æˆ¦ ğŸ…</div>
<div class="menu-grid">
    <a href="/learn/fish" class="menu-item">
        <img src="{{ url_for('static', filename='images/fish_vintage.png') }}" alt="é­šå›³é‘‘">
        <div class="menu-label">é­šå›³é‘‘</div>
    </a>
    <a href="/mission/badges" class="menu-item">
        <img src="{{ url_for('static', filename='images/medal.png') }}" alt="ãƒãƒƒã‚¸">
        <div class="menu-label">ãƒãƒƒã‚¸</div>
    </a>
    <a href="/quests/" class="menu-item">
        <img src="{{ url_for('static', filename='images/gear_inventory.png') }}" alt="ã‚¯ã‚¨ã‚¹ãƒˆ">
        <div class="menu-label">ã‚¯ã‚¨ã‚¹ãƒˆ</div>
    </a>
    <a href="/learn/" class="menu-item">
        <img src="{{ url_for('static', filename='images/live_bait.png') }}" alt="é‡£ã®ä»•æ–¹">
        <div class="menu-label">é‡£ã®ä»•æ–¹</div>
    </a>
</div>

<script>
if (!localStorage.getItem('tsuri_username')) {
    window.location.href = '/register';
}
const savedName = localStorage.getItem('tsuri_username');
if (savedName) {
    const el = document.querySelector('.username');
    if (el) el.textContent = 'å‹‡è€…ï¼š' + savedName;
}
</script>

{% endblock %}